<%-include("./partials/header") %>
<div class="container set">
    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="<%=data.img1%>" class="d-block w-100 imgC img-fluid" alt="...">
            </div>
            <div class="carousel-item">
                <img src="<%=data.img2%>" class="d-block w-100 imgC img-fluid" alt="...">
            </div>
            <div class="carousel-item">
                <img src="<%=data.img3%>" class="d-block w-100 imgC img-fluid" alt="...">
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
<div class="container-fluid set">
    <div class="row">
        <div class="col-lg-6 col-md-12">
            <div class="box shadow p-3 mb-5 bg-white rounded">
                <div class="title d-flex justify-content-between">
                    <h1 class="pb-2"><%=data.title%></h1>
                    <h4><i class="fas fa-rupee-sign"></i> <span><%=data.price%></span></h4>
                </div>
                <div class="">
                    <p><i class="fas fa-map-marker-alt"></i> <%=data.city%> , <%=data.state%></p>
                </div>
                <div class="">
                    <p><%=data.activity%></p>
                </div>
                <div class="">
                    <p><strong>Known For : </strong><%=data.known%></p>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-sm-12 d-flex justify-content-center">
            <div class="calc_box">
                <form action="/ycampo/<%=data._id%>/booking" method="POST">
                    <table class="table border">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">Type</th>
                                <th scope="col">PPC</th>
                                <th scope="col">Qty</th>
                                <th scope="col">NOP</th>
                                <th scope="col" style="font-size: 12px;">Guide <i class="fas fa-rupee-sign"></i>2000</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">Tent</th>
                                <td id="price"><%=data.price%></td>
                                <td><input type="number" min="0" step="1" style="width:40px;" name="qty"></td>
                                <td><input type="number" min="0" step="1" style="width:40px;" name="nop"></td>
                                <td><input type="number" min="0" step="1" max="1" style="width:40px;" name="guide"></td>
                            </tr>
                            <tr>
                                <th scope="row">BYOT</th>
                                <td id="#price2"><%=data.price%></td>
                                <td>N/A</td>
                                <td><input type="number" min="0" step="1" style="width:40px;" name="nop2" ></td>
                                <td><input type="number" min="0" step="1" max="1" style="width:40px;" name="guide2"></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn btn-warning w-100">Booking</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid  d-flex align-items-start" id="description">
    <div class="container text-center ">
        <div class="row">
            <div class="col-lg-4 ">
                <div style="font-size:25px"><i class="far fa-clipboard  d-md-block" id="desc_icon"></i>   <strong>Description : </strong></div> 
            </div>
            <div class="col-lg-8">
                <div class="font-weight-light text-left" style="font-size:18px;" ><%=data.desc%><blockquote class="blockquote">
                    <footer class="blockquote-footer">Made by <cite title="Source Title"><%=data.author.username%></cite></footer>
                </blockquote>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container d-flex justify-content-start align-items-center mt-2">
    <%if(currentUser && data.author.id.equals(currentUser._id)){%>
    <a href="/ycampo/<%=data._id%>/edit" class="btn btn-outline-warning px-4 mr-4 ml-5">EDIT</a>
    <form action="/ycampo/<%=data.id%>?_method=DELETE" method="post">
        <button class="btn btn-outline-danger px-4">DELETE</button>
    </form>
    <%}%>
</div>
<div class="container amenities p-5">
    <div class="row">
        <div class="col-lg-4">
            <h3>Amenities :-</h3>
        </div>
        <div class="col-lg-8">
            
            <%for(var key in data.checkbox){%>
                <%if(data.checkbox[key]=="Drinking water" || data.checkbox[key]=="drinking water" ){%>
                    <p><i class="fas fa-glass-whiskey"></i>  <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Shower" || data.checkbox[key]=="shower" ){%>
                <p><i class="fas fa-shower"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Covered area" || data.checkbox[key]=="covered area" ){%>
                <p><i class="fas fa-chart-area"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Pet allowed" || data.checkbox[key]=="pet allowed" ){%>
                <p><i class="fas fa-paw"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Breakfast included" || data.checkbox[key]=="breakfast included" ){%>
                <p><i class="fas fa-pizza-slice"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Barbeque grills" || data.checkbox[key]=="barbeque grills" ){%>
                <p><i class="fas fa-dumpster-fire"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Wifi" || data.checkbox[key]=="wifi" ){%>
                <p><i class="fas fa-wifi"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Good for groups" || data.checkbox[key]=="good for groups" ){%>
                <p><i class="fas fa-users"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Charging points" || data.checkbox[key]=="charging points" ){%>
                <p><i class="fas fa-charging-station"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Campfire" || data.checkbox[key]=="campfire" ){%>
                <p><i class="fab fa-free-code-camp"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Toilets" || data.checkbox[key]=="toilets" ){%>
                <p><i class="fas fa-toilet"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Picnic tables" || data.checkbox[key]=="picnic tables" ){%>
                <p><i class="fas fa-table"></i> <%=data.checkbox[key]%></p>
                <%}
                else if(data.checkbox[key]=="Dinner included" || data.checkbox[key]=="dinner included" ){%>
                <p><i class="fas fa-utensils"></i> <%=data.checkbox[key]%></p>
                <%}%>
            
            <%}%>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-lg-4">
            <h3>Activities</h3>
        </div>
        <div class="col-lg-8">
            <%for(var key in data.activity){%>
                <%if(data.activity[key]=="Climbing" || data.activity[key]=="climbing" ){%>
                <p><i class="fas fa-mountain"></i> <%=data.activity[key]%></p>
                <%}
                else if(data.activity[key]=="Trekking" || data.activity[key]=="trekking" ){%>
                <p><i class="fas fa-mountain"></i> <%=data.activity[key]%></p>
                <%}
                else if(data.activity[key]=="Wildlife watching" || data.activity[key]=="wildlife watching" ){%>
                <p><i class="fas fa-hippo"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Swimming" || data.activity[key]=="swimming"){%>
                <p><i class="fas fa-swimming-pool"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Cycling" || data.activity[key]=="cycling"){%>
                <p><i class="fas fa-bicycle"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Campfire" || data.activity[key]=="campfire"){%>
                <p><i class="fas fa-fire"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Kayaking" || data.activity[key]=="kayaking"){%>
                <p><i class="fas fa-ship"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Off-roading" || data.activity[key]=="off-roading"){%>
                <p><i class="fas fa-car-side"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Boating" || data.activity[key]=="boating"){%>
                <p><i class="fas fa-ship"></i> <%=data.activity[key]%></p>
                <%}else if(data.activity[key]=="Hiking" || data.activity[key]=="hiking"){%>
                <p><i class="fas fa-hiking"></i> <%=data.activity[key]%></p>
                <%}%>
            <%}%>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-lg-4">
            <h3>Other Activities :- </h3>
        </div>
        <div class="col-lg-8">
            <%=data.otherActivities%>
        </div>
    </div>
</div>
<!--Review section-->
<div class="thumbnail">
    <div class="caption-full">
        <% if (data.rating === 0) { %>
        <h5>
            <em>No reviews yet.</em>
        </h5>
        <% } else { %>
        <p>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star <% if (data.rating > 1.5) { %> checked <% } %>"></span>
            <span class="fa fa-star <% if (data.rating > 2.5) { %> checked <% } %>"></span>
            <span class="fa fa-star <% if (data.rating > 3.5) { %> checked <% } %>"></span>
            <span class="fa fa-star <% if (data.rating > 4.5) { %> checked <% } %>"></span>
            <em>(total reviews: <%= data.reviews.length %>)</em>
        </p>
        <p>
            Current campground rating: <strong><%= data.rating.toFixed(2) %></strong>
        </p>
        <p>
            <h4>Latest reviews for this campground:</h4>
        </p>
        <hr style="margin-top: 0;">
        <% data.reviews.slice(0, 5).forEach(function(review){ %>
        <div class="row">
            <div class="col-md-3">
                <%- '<span class="fa fa-star checked"></span>'.repeat(review.rating) %><%- '<span class="fa fa-star"></span>'.repeat(5 - review.rating) %>
                <div>Review by: <strong><%= review.author.username %></strong></div>
                <span><em><%= review.updatedAt.toDateString() %></em></span>
            </div>
            <div class="col-md-9">
                <p style="text-align: justify; word-wrap: break-word;">
                    <%= review.text %>
                </p>
                <% if(currentUser && review.author.id.equals(currentUser._id)){ %>
                <a class="btn btn-xs btn-warning"
                    href="/ycampo/<%=data._id %>/review/<%=review._id %>/edit">Edit</a>
                <form id="delete-form"
                    action="/ycampo/<%=data._id %>/review/<%=review._id %>?_method=DELETE" method="POST">
                    <input type="submit" class="btn btn-xs btn-danger" value="Delete">
                </form>
                <% } %>
            </div>
        </div>
        <hr>
        <% }); %>
        <div style="margin-bottom: 10px;">
            <h4><a href="/ycampo/<%= data._id %>/review"><i class="fa fa-search" aria-hidden="true"></i> See
                    all reviews</a></h4>
        </div>
        <% } %>
        <div>
            <a class="btn btn-primary btn-lg <% if (currentUser && data.reviews.some(function (review) {return review.author.id.equals(currentUser._id)})) { %> disabled <% } %>"
                href="/ycampo/<%= data._id %>/review/new">
                Write a New Review</a>
        </div>
    </div>
</div>

<div class="container set">
    <div>
        <div class="comment_box p-3 rounded">
            <div class="d-flex justify-content-end">
                <a class="btn btn-success d-block w-25 comment_button " href="/ycampo/<%=data._id%>/comment/new">Add Comment</a>
            </div>
            <hr style="width:100%;">
            <% data.comments.forEach(function(comment){%>
            <p class="m-0 font2"><strong><%=comment.author.username%></strong></p>
            <p style="margin-bottom:15px;"><%=comment.text%></p>
            <%})%>
        </div>
    </div>
</div>
<%-include("./partials/footer") %>